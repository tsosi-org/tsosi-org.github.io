{{ $url := .Destination }}
{{ if or (strings.HasPrefix $url "http") (strings.HasPrefix $url "mailto") }}
    <!-- External link with target="_blank" -->
    <a href="{{ $url }}" target="_blank" rel="noopener noreferrer">{{ .Text | safeHTML }}</a>
{{ else }}
    <!-- Internal link without target="_blank" -->
    <a href="{{ $url }}">{{ .Text | safeHTML }}</a>
{{ end }}